<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="/assets/css/common.css">
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="icon" href="/assets/favicon.ico">
<meta name="robots" content="noindex">
<title>Using Maps on a Webpage</title>
<link rel="stylesheet" href="/assets/css/l-standard.css">
</head>
<body>
<div class="container">      
<header class="header-area">
    <div class="header-image">
        <img src="/content/headers/header.jpg" alt="Header photo for retired not out"/> 
        <p class="header-image-bc"><a href="/">Retired Not Out - Jekyll Websites</a></p>
    </div>
    <nav class="header-nav">
        
            <p class="header-nav-item"><a href="/index">About</a></p>
        
            <p class="header-nav-item"><a href="/copyright">Copyright</a></p>
        
            <p class="header-nav-item"><a href="/categories/">Categories</a></p>
        
            <p class="header-nav-item"><a href="/articles/">Articles</a></p>
        
    </nav>  
</header>     

<div class="clear-both"></div>
<article class="article-area">
<div class="l-standard">
    <h1 id="using-maps-on-a-webpage">Using Maps on a Webpage</h1>

<p><span class="provisional"><strong>This article is provisional.</strong></span></p>

<p>When the Ulverston Fallen website was designed, we thought it would be a good idea to include a map showing where the fallen lived. The resulting map page is <a href="https://www.ulverstonfallen.uk/world-war-one/map-of-fallen">here</a>. The map can be zoomed in and out, in a similar way to google maps. Each poppy on the map shows where one of the fallen lived. Clicking a poppy displays the name of the person living at the address. Clicking the name displays information about that person.</p>

<p>In order to add a map to a webpage, a high-definition version of it is required (<em>along with permission to use it</em>). The map we used came from the <a href="https://maps.nls.uk/index.html">National Library of Scotland</a> and cost around £20. It came as a single ‘tiff’ file, with a size of around 560MB. Its dimensions are 16800 by 11656 pixels. Because of its size, it shows detail down to individual houses on a street.</p>

<p>The map is far, far too big to be used on a web page, it would take too long to download.</p>

<p>In order to use it, it needs to be converted into a tiled map. A tiled map consists of individual tiles that have a size of 256 by 256 pixels, which are seamlessly joined together by the browser. It also has a zoom level. The outer most zoom level is zero, which has a single tile. As the zoom level increases, each individual tile is replaced by 4. At zoom level one, there are 4 tiles; at zoom level two, there are 16; at zoom level three, there are 64; and so on. As the zoom level increases, the number of tiles increases, and therefore, the detail increases. The Ulverston map at zoom level zero shows very little detail. If you zoom in to the maximum depth, each tile shows individual houses on a street.</p>

<p>Google maps also uses a tiled map. At the outer level there is just one tile covering the whole of the earth. The tiles have 22 levels (or a maximum depth of 22). The google map of the Earth has millions and millions of tiles. The Ulverston Fallen map has just under a thousand.</p>

<p>The tiles are created as part of the website’s development using a program such as <a href="https://www.qgis.org/en/site/">QGIS</a> and are stored on the website’s web server. They are downloaded by the browser as required.</p>

<p>When the Ulverston Fallen map is first displayed, the entire map is displayed. To do this, the browser only needs to get the single tile at tile depth  zero. As the map is zoomed in, the browser must get more tiles from the web server. However, it only needs to get the tiles from the relevant tile zoom level (which is clearly tied to the display map zoom level), for the area that fits in the map window. If the map is moved within the window, the browser only needs to get the missing tiles.</p>

<p>The browser is not downloading the entire map, it is only downloading the tiles for the parts of the map it needs. Once downloaded, the browser stitches them together.</p>

<p>In reality, the creation and processing of tiles is a little bit more complicated, but the above description gives a pretty good idea of what is going on beneath the surface.</p>

<p>In order to position the poppies  on the map, a coordinate system is required. The best system to use is latitude and longitude. Then, once you know the latitude and longitude of a person’s address, it can be marked on other maps (if it has latitude and longitude coordinates). We know where a given person lived just before the war. Using google maps, we can also see where the house is now, whether it still exists or not. Latitude and longitude locations for the map can be set with <a href="https://www.qgis.org/en/site/">QGIS</a> (which is open source and free to use). An easy enough process. The coordinates need to be setup before the tiles are created.</p>

<p>The browser does not have the ability to display mapping tiles. To do this a Java Script code library is required. There are many of these, but <a href="https://leafletjs.com/">Leaflet</a> (which is open source and free to use) is the most commonly used.</p>

<p>The rest of this article describes how to create a mapping page in more detail. It assumes you are using at least QGIS version 3.34 and leaflet version 1.9.4.</p>

<h4 id="aligning-the-map-to-the-earths-surface">Aligning the Map to the Earth’s Surface</h4>

<p>Once a suitable map has been obtained its latitude and longitude locations need to set. How this is done is covered in detail <a href="/maps/aligning-a-map-to-the-earths-surface">here</a>.</p>

<h4 id="creating-the-mapping-tiles">Creating the Mapping Tiles</h4>

<p>Once the map has been aligned to the Earth’s surface, the mapping tiles need to be created. How this is done is covered in detail <a href="/maps/creating-the-mapping-tiles">here</a>.</p>

<h4 id="setting-up-leaflet">Setting up Leaflet</h4>

<p>Once the map tiles have been created, we need to write the Java Script code, that displays and controls the map. How this is done is covered in detail <a href="/maps/setting-up-leaflet-to-display-the-map">here</a>.</p>

<p><br />
Written by Paul Chappell, May 2024.</p>


</div>
</article>

<div class="clear-both"></div>
<footer class="footer-area">
    <div class="foot-text">
        <p class="foot-text-left">Copyright © 2024 Paul Chappell. All Rights Reserved</p>
        <p class="foot-text-right">Built With <a href="https://jekyllrb.com/">Jekyll</a>; Hosted By <a href="https://pages.github.com/">GitHub Pages</a></p>
    </div>
    <nav class="foot-nav">
        
            <p class="foot-nav-item"><a href="/index">About</a></p>
        
            <p class="foot-nav-item"><a href="/copyright">Copyright</a></p>
        
            <p class="foot-nav-item"><a href="/categories/">Categories</a></p>
        
            <p class="foot-nav-item"><a href="/articles/">Articles</a></p>
        
            <p class="foot-nav-item"><a href="/contact">Contact</a></p>
        
            <p class="foot-nav-item"><a href="/info">Info</a></p>
        
    </nav>  
</footer>
            
</div>
</body>
</html>
